{"ast":null,"code":"import React,{useEffect}from\"react\";import{Button,Table,Row,Col}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{LinkContainer}from\"react-router-bootstrap\";import{createProduct,listProducts}from\"../actions/productActions\";import Loader from\"../components/Loader\";import Paginate from\"../components/Paginate\";import Message from\"../components/Message\";import{deleteProduct}from\"../actions/productActions\";var ProductListScreen=function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var pageNumber=match.params.pageNumber;var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productList=useSelector(function(state){return state.productList;});var error=productList.error,loading=productList.loading,products=productList.products,page=productList.page,pages=productList.pages;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure?\")){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};useEffect(function(){if(!userInfo.isAdmin){history.push(\"/login\");}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(\"\",pageNumber));}},[dispatch,history,userInfo,successDelete,successCreate,createdProduct,pageNumber]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h2\",{className:\"title\"},\"Products\")),/*#__PURE__*/React.createElement(Col,{className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"my-3 product_btn\",onClick:createProductHandler},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,responsive:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,\"$\",product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{variant:\"light\",className:\"btn-sm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-edit\"}))),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))));}))),/*#__PURE__*/React.createElement(Paginate,{page:page,pages:pages,isAdmin:true})));};export default ProductListScreen;","map":{"version":3,"sources":["C:/Users/Abeeb Ahmed/Tech-shop/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","Button","Table","Row","Col","useDispatch","useSelector","LinkContainer","createProduct","listProducts","Loader","Paginate","Message","deleteProduct","ProductListScreen","history","match","pageNumber","params","dispatch","userLogin","state","userInfo","productList","error","loading","products","page","pages","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","deleteHandler","id","window","confirm","createProductHandler","isAdmin","push","_id","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Button, Table, Row, Col } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { createProduct, listProducts } from \"../actions/productActions\";\r\nimport Loader from \"../components/Loader\";\r\nimport Paginate from \"../components/Paginate\";\r\nimport Message from \"../components/Message\";\r\nimport { deleteProduct } from \"../actions/productActions\";\r\n\r\nconst ProductListScreen = ({ history, match }) => {\r\n  const pageNumber = match.params.pageNumber;\r\n  const dispatch = useDispatch();\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n  const productList = useSelector((state) => state.productList);\r\n  const { error, loading, products, page, pages } = productList;\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete;\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate;\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm(\"Are you sure?\")) {\r\n      dispatch(deleteProduct(id));\r\n    }\r\n  };\r\n  const createProductHandler = () => {\r\n    dispatch(createProduct());\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!userInfo.isAdmin) {\r\n      history.push(\"/login\");\r\n    }\r\n    if (successCreate) {\r\n      history.push(`/admin/product/${createdProduct._id}/edit`);\r\n    } else {\r\n      dispatch(listProducts(\"\", pageNumber));\r\n    }\r\n  }, [\r\n    dispatch,\r\n    history,\r\n    userInfo,\r\n    successDelete,\r\n    successCreate,\r\n    createdProduct,\r\n    pageNumber,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"align-items-center\">\r\n        <Col>\r\n          <h2 className=\"title\">Products</h2>\r\n        </Col>\r\n        <Col className=\"text-right\">\r\n          <Button className=\"my-3 product_btn\" onClick={createProductHandler}>\r\n            <i className=\"fas fa-plus\"></i> Create Product\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\r\n      {loadingCreate && <Loader />}\r\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered responsive hover>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>${product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant=\"light\" className=\"btn-sm\">\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      className=\"btn-sm\"\r\n                      onClick={() => deleteHandler(product._id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate page={page} pages={pages} isAdmin={true} />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductListScreen;\r\n"]},"metadata":{},"sourceType":"module"}